---
Name: "奥洛克斯峡谷道3"
Chapter:
- "[[第二章 美丽的翡翠公都#^ch-2-5-29-location-03|第二章5/29]]"
FishingPorts:
- ""
---
# `$=dv.current().Name;`

出现章节: `$=dv.current().Chapter;`

## 地图&宝箱
```leaflet
id: "奥洛克斯峡谷道3"
image: "![[图片/游戏攻略/英雄传说/英雄传说 闪之轨迹/笔记/迷宫/奥洛克斯峡谷道3.jpg]]"
height: 500px
minZoom: 1
maxZoom: 10
defaultZoom: 9
```
```dataviewjs
const boxes = dv.pages('#英雄传说/闪之轨迹/笔记/宝箱 and -"模板"')
	.sort(i => [i.file.name], 'asc')
	.filter(i => {
  	return dv.current().name == dv.page(i.Position.path).file.name;
	});
const views = await Promise.all(boxes.map(b => dv.view('Item', { items: b.Bonus, options: { inline: false, raw: true } })));
console.log(views)
dv.table(
	["宝箱", "奖励", "备注"],
	boxes.map((i , index)=> [
		i.file.link,
		views[index],
		i.Remark
	])
);
```

## 战斗笔记
```dataviewjs
const notes = dv.pages('#英雄传说/闪之轨迹/笔记/战斗 and -"模板"')
.filter(note => {
  const monsterFiles = note.Locations.map(l => dv.page(l.path)).map(l => l.file.name);
  return monsterFiles.includes(dv.current().file.name);
})
.sort(note => [ note.Boss ? 1 : 0, note.Properties.LV, note.Name ], 'asc');

const drops = await Promise.all(notes.map(note => dv.view('Item', { items: note.Droped.Items, options: { inline: false, raw: true } })));

dv.table(
	["", "名称", "掉落"],
	notes.map((m, index) => [
  	dv.fileLink(m.Icon.path, true, '50'),
		dv.fileLink(m.file.path, false, m.Name),
		drops[index]
	])
);
```

## 钓鱼笔记
钓鱼点: `$=dv.current().FishingPorts;`

```dataviewjs
const fishs = dv.pages('#英雄传说/闪之轨迹/笔记/钓鱼 and -"模板"')
	.filter(i => i.Positions.map(position => position.path ? dv.page(position.path).file.name : '').includes(dv.current().name));
const bonus = await Promise.all(fishs.map(f => dv.view('Item', { items: f.Bonus, options: { inline: false, raw: true } })));
const rods = await Promise.all(fishs.map(f => dv.view('Item', { items: f.Rods, options: { inline: false, raw: true } })));
dv.table(
	["", "名称", "鱼竿", "掉落"],
	fishs.map((m, index) => [
  	dv.fileLink(m.Icon.path, true, "50"),
		m.file.link,
		rods[index],
		bonus[index]
	])
);
```

#英雄传说/闪之轨迹/笔记/迷宫