# 按获取先后顺序
```dataviewjs
const notes = dv.pages('#英雄传说/闪之轨迹/笔记/人物 and -"模板"');
const icons = await Promise.all(notes.map(note => dv.view('Icons/Character', { name: note.Name, category: 'ColdSteel', options: { raw: true } })));
const subnotes = notes.map((note, index) => {
  const icon = icons[index];
  return note.Notes.map(n => {
    n.icon = icon;
    return n;
  });
})
.values
.flat(2)
.sort((n1, n2) => {
  const chapter1 = dv.page(n1.Time.path);
  const chapter2 = dv.page(n2.Time.path);
  !chapter1.No && console.log('chapter1 => ',chapter1);
  !chapter2.No && console.log('chapter2 => ',chapter2);
  if(chapter1.No != chapter2.No){
    return chapter1.No - chapter2.No;
  } else {
    const chapter1_subpath = n1.Time.subpath;
    const chapter2_subpath = n2.Time.subpath;
    return chapter1_subpath-chapter2_subpath;
  }
});
dv.table(
  ["人物", "标题", "章节", "获取方式"],
  subnotes.map(note => {
    const icon = dv.fileLink(note.icon.file.path, true, '50');
    return [
      icon,
      note.Title,
      note.Time,
      note.How
    ];
  })
);
```

# 按角色分组顺序
```dataviewjs
const groups = dv.pages('#英雄传说/闪之轨迹/笔记/人物 and -"模板"')
.groupBy(note => note.Category)
.sort(group => [group.rows[0].CategoryNo], 'asc');


for(const group of groups){
  dv.header(1, group.key);
  const notes = group.rows.sort(n => [n.NoInCategory, n.Name], 'asc')
  for(const note of notes) {
    const { Name, FullName, Description, Notes, Category } = note;
    const icon = await dv.view('Icons/Character', { name: Name, category: 'ColdSteel', options: { raw: true } });
    dv.header(2, FullName);
    dv.table(
      [],
      [
        [
          dv.fileLink(icon.file.path, true, '100'),
          Description
        ],
      ]
    );
    dv.table(
      [],
      Notes.map(n => {
        const { Title, Content, Time, How } = n;
        Time.display = Title;
        return [
          Time,
          Content,
        ];
      })
    );
    dv.span('---')
  }
}
```

#英雄传说/闪之轨迹/笔记/汇总   