---
Characters:
  艾德尔:
    Name: "艾德尔"
    FullName: "艾德尔"
    CategoryName: "2年级(I II班)"
    CategoryNum: 4
    InCategoryNum: 7
    Description: |
      2年级II班【园艺社】
      
      园艺社长.
      
      头上的草帽可以说是她的注册商标.
      
      基本上个性悠哉, 且有很高的包容力.

    Notes:
      - Title: "园艺社的活动"
        ID: "yuanyishedehuodong"
        Content: |
          在园艺社也兼种菜.
          
          吃『苦番茄』时是喜欢大口咬下的那一派.
        Time: "[[第四章 绯之帝都 ~仲夏祭~#^ch-4-7-18-character-02|第四章7/18]]"
        How: "士官学院中庭, 与艾德尔对话"
    
---
```dataviewjs
const { Characters } = dv.current();
const character = Characters[Object.keys(Characters)[0]];
const { Name, FullName, Notes: [ note1 ] } = character;
```


# 按获取先后顺序
```dataviewjs
const notes = dv.pages('#英雄传说/闪之轨迹/笔记/人物 and -"模板"');
const icons = await Promise.all(notes.map(note => dv.view('Icons/Character', { name: note.Name, category: 'ColdSteel', options: { raw: true } })));
const subnotes = notes.map((note, index) => {
  const icon = icons[index];
  return note.Notes.map(n => {
    n.icon = icon;
    return n;
  });
})
.values
.flat(2)
.sort((n1, n2) => {
  const chapter1 = dv.page(n1.Time.path);
  const chapter2 = dv.page(n2.Time.path);
  if(chapter1.No != chapter2.No){
    return chapter1.No - chapter2.No;
  } else {
    const chapter1_subpath = n1.Time.subpath.substring(3,10).replace(/-/g, '');
    const chapter2_subpath = n2.Time.subpath.substring(3,10).replace(/-/g, '');
    return parseFloat(chapter1_subpath) - parseFloat(chapter2_subpath);
  }
});
console.log(subnotes);
dv.table(
  ["人物", "标题", "章节", "获取方式"],
  subnotes.map(note => {
    const icon = dv.fileLink(note.icon.file.path, true, '50');
    return [
      icon,
      note.Title,
      note.Time,
      note.How
    ];
  })
);
```

# 按角色分组顺序
```dataviewjs
const groups = dv.pages('#英雄传说/闪之轨迹/笔记/人物 and -"模板"')
.groupBy(note => note.Category)
.sort(group => [group.rows[0].CategoryNo], 'asc');


for(const group of groups){
  dv.header(1, group.key);
  const notes = group.rows.sort(n => [n.NoInCategory, n.Name], 'asc')
  for(const note of notes) {
    const { Name, FullName, Description, Notes, Category } = note;
    const icon = await dv.view('Icons/Character', { name: Name, category: 'ColdSteel', options: { raw: true } });
    dv.header(2, FullName);
    dv.table(
      [],
      [
        [
          dv.fileLink(icon.file.path, true, '100'),
          Description
        ],
        ...Notes.map(n => {
          const { Title, Content, Time, How } = n;
          const timeLink = dv.blockLink(Time.path, Time.subpath, false, Title);
          return [
            timeLink,
            Content,
          ];
        })
      ]
    );
    dv.span('---')
  }
}
```

#英雄传说/闪之轨迹/笔记/汇总   